{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/img/normal1.webp","webpack:///./src/img/clicked.webp","webpack:///./src/App.vue","webpack:///../src/eventBus.js","webpack:///../src/utils.js","webpack:///../src/index.js","webpack:///src/App.vue","webpack:///./src/App.vue?4c4f","webpack:///./src/App.vue?3746","webpack:///./src/main.js","webpack:///./src/img/normal.webp","webpack:///./src/App.vue?a35d","webpack:///./src/img/clicked1.webp"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","render","_vm","this","_c","_self","attrs","_v","_s","score","on","play","pause","stop","add","remove","staticRenderFns","EventBus","constructor","events","$on","event","fn","$emit","forEach","loadImage","src","Promise","resolve","image","Image","onload","onerror","RAIN_TYPE","NORMAL","CLICKED","RainGame","options","super","$canvas","el","document","querySelector","setAttribute","offsetWidth","offsetHeight","ctx","getContext","preload","interval","speed","horizontalMovement","originRains","rains","renderRains","raf","preGenerateTime","replay","isPlaying","loadSource","Date","now","bindEvent","map","loadImageItem","rain","img","clicked","handleClickFn","handleClick","addEventListener","offEvent","removeEventListener","e","offsetX","offsetY","len","x","y","width","height","rainType","boundary","originData","boundaryArr","Array","fill","isArray","isWithinTop","isWithinRight","isWithinBottom","isWithinLeft","isClicked","clickedRain","clickedRainX","translate","clickedRainY","removeRain","addRain","start","duration","clearRect","generateRain","updateRain","drawRain","requestAnimationFrame","stopRender","cancelAnimationFrame","getRain","ratios","ratio","total","reduce","random","Math","left","right","filter","directionX","speedY","speedX","updateY","updateX","assign","drawImage","index","indexOf","mounted","require","rainGame","console","log","methods","id","component","Vue","config","productionTip","h","App","$mount"],"mappings":"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","file":"js/app.738d893a.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/rain-game/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","module.exports = __webpack_public_path__ + \"img/normal1.ccca2353.webp\";","module.exports = __webpack_public_path__ + \"img/clicked.27495d8a.webp\";","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"app\"}},[_c('h3',[_vm._v(\"积分：x\"+_vm._s(_vm.score))]),_c('canvas',{attrs:{\"id\":\"canvas\"}}),_c('button',{on:{\"click\":_vm.play}},[_vm._v(\"开始\")]),_c('button',{on:{\"click\":_vm.pause}},[_vm._v(\"暂停\")]),_c('button',{on:{\"click\":_vm.stop}},[_vm._v(\"停止\")]),_c('button',{on:{\"click\":_vm.add}},[_vm._v(\"添加\")]),_c('button',{on:{\"click\":_vm.remove}},[_vm._v(\"移除\")])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export default class EventBus {\n    constructor () {\n        this.events = {}\n    }\n\n    $on (event, fn) {\n        (this.events[event] || (this.events[event] = [])).push(fn)\n    }\n\n    $emit(event, ...data) {\n        (this.events[event] || []).forEach(fn => fn(...data))\n    }\n}","export function loadImage (src) {\n    return new Promise(resolve => {\n        {\n            const image = new Image()\n            image.src = src\n            image.onload = image.onerror = resolve(image)\n        }\n    })\n}\n","import EventBus from './eventBus'\nimport { loadImage } from \"./utils\"\n\nconst RAIN_TYPE = {\n    NORMAL: 1,\n    CLICKED: 2,\n}\n\nexport default class RainGame extends EventBus {\n    constructor (options) {\n        super ()\n\n        this.$canvas = typeof options.el === 'string' ? document.querySelector(options.el) : options.el\n        this.$canvas.setAttribute('width', this.$canvas.offsetWidth)\n        this.$canvas.setAttribute('height', this.$canvas.offsetHeight)\n        this.ctx = this.$canvas.getContext('2d')\n\n        this.preload = options.preload\n        this.interval = options.interval || 500\n        this.speed = options.speed || 2\n        this.horizontalMovement = options.horizontalMovement\n        this.originRains = options.rains || []\n\n        this.renderRains = []\n        this.raf = null\n        this.preGenerateTime = null\n        this.replay = false\n        this.isPlaying = false\n\n        if (this.preload) {\n            this.loadSource()\n        }\n    }\n\n    async play () {\n        if (this.isPlaying) {\n            return\n        }\n\n        await this.loadSource()\n\n        if (this.replay) {\n            this.preGenerateTime = Date.now()\n        }\n\n        this.bindEvent()\n        this.render()\n\n        this.replay = true\n        this.isPlaying = true\n    }\n\n    loadSource () {\n        return this.originRains.map(this.loadImageItem)\n    }\n\n    async loadImageItem (rain) {\n        if (rain.img) {\n            return\n        }\n\n        rain.img = await loadImage(rain.image)\n\n        if (rain.clicked) {\n            rain.clicked.img = await loadImage(rain.clicked.image)\n        }\n    }\n\n    bindEvent () {\n        this.handleClickFn = this.handleClick.bind(this)\n\n        this.$canvas.addEventListener('click', this.handleClickFn)\n    }\n\n    offEvent () {\n        this.$canvas.removeEventListener('click', this.handleClickFn)\n    }\n\n    handleClick (e) {\n        const { offsetX, offsetY } = e\n\n        // 处理重叠问题, 越后出现层级越高\n        for (let len = this.renderRains.length, i = len - 1; i >= 0; i--) {\n            const rain = this.renderRains[i]\n            const {\n                x,\n                y,\n                width,\n                height,\n                rainType,\n                boundary,\n                originData,\n            } = rain\n\n            if (rainType === RAIN_TYPE.CLICKED) {\n                continue\n            }\n            \n            const boundaryArr = typeof boundary === 'number'\n                ? new Array(4).fill(boundary)\n                : Array.isArray(boundary)\n                    ? boundary\n                    : new Array(4).fill(0)\n            \n            const isWithinTop = offsetY >= y - (boundaryArr[0] || 0)\n            const isWithinRight = offsetX <= x + width + (boundaryArr[1] || 0)\n            const isWithinBottom = offsetY <= y + height + (boundaryArr[2] || 0)\n            const isWithinLeft = offsetX >= x - (boundaryArr[3] || 0)\n\n            const isClicked = isWithinTop && isWithinRight && isWithinBottom && isWithinLeft\n\n            if (isClicked) {\n                this.$emit('strike', originData)\n\n                const clickedRain = originData.clicked\n\n                if (clickedRain) {\n                    const clickedRainX = x + (clickedRain.translate && clickedRain.translate[0] ? clickedRain.translate[0] : 0)\n                    const clickedRainY = y + (clickedRain.translate && clickedRain.translate[1] ? clickedRain.translate[1] : 0)\n\n                    this.removeRain(rain)\n                    this.addRain({\n                        img: clickedRain.img,\n                        x: clickedRainX,\n                        y: clickedRainY,\n                        width: clickedRain.width,\n                        height: clickedRain.height,\n                        rainType: RAIN_TYPE.CLICKED,\n                        start: Date.now(),\n                        duration: clickedRain.duration || 200,\n                    })\n\n                    break\n                }\n            }\n        }\n    }\n\n    render () {\n        this.clearRect()\n        this.generateRain()\n        this.updateRain()\n        this.drawRain()\n\n        this.raf = window.requestAnimationFrame(this.render.bind(this))\n    }\n\n    stopRender () {\n        window.cancelAnimationFrame(this.raf)\n    }\n\n    clearRect () {\n        this.ctx.clearRect(0, 0, this.$canvas.width, this.$canvas.height)\n    }\n\n    generateRain () {\n        if (!this.originRains.length) {\n            return\n        }\n        \n        const now = Date.now()\n\n        if (now - this.preGenerateTime > this.interval) {\n            const rain = this.getRain()\n            this.addRain(rain)\n\n            this.preGenerateTime = now\n        }\n    }\n\n    getRain () {\n        const ratios = this.originRains.map(rain => rain.ratio || 1)\n        const total = ratios.reduce((total, ratio) => {\n            total += ratio\n\n            return total\n        }, 0)\n        const random = Math.random()\n        let rain = null\n        let left = 0\n        let right = 0\n        let i =0\n        let len = ratios.length\n        for (; i < len; i++) {\n            left += (ratios[i - 1] ? ratios[i - 1] / total : 0)\n            right = left + ratios[i] / total\n\n            if (random >= left && random <= right) {\n                rain = this.originRains[i]\n                break\n            }\n        }\n\n        return {\n            originData: rain,\n            img: rain.img,\n            x: Math.random() * (this.$canvas.width - rain.width),\n            y: -rain.height,\n            width: rain.width,\n            height: rain.height,\n            rainType: RAIN_TYPE.NORMAL,\n        }\n    }\n\n    addRain (rain) {\n        this.renderRains.push(rain)\n    }\n\n    updateRain () {\n        this.renderRains.filter(rain => rain.rainType === RAIN_TYPE.CLICKED).forEach(rain => {\n            if (Date.now() - rain.start > rain.duration) {\n                this.removeRain(rain)\n            }\n        })\n\n        this.renderRains.filter(rain => rain.rainType !== RAIN_TYPE.CLICKED).forEach(rain => {\n            const { x, y, width, speed, directionX } = rain\n            const speedY = speed || this.speed\n            const speedX = this.$canvas.offsetWidth / this.$canvas.offsetHeight * speedY\n\n            const updateY = y + speedY\n            let updateX = x\n\n            if (this.horizontalMovement) {\n                if (!directionX) {\n                    rain.directionX = Math.random() > .5 ? 'right' : 'left'\n                }\n\n                updateX = x + speedX * (directionX === 'right' ? 1 : -1)\n\n                if (updateX < 0) {\n                    rain.directionX = 'right'\n                }\n\n                if (updateX > this.$canvas.width - width) {\n                    rain.directionX = 'left'\n                }\n            }\n\n            Object.assign(rain, {\n                x: updateX,\n                y: updateY,\n            })\n        })\n    }\n\n    drawRain () {\n        this.renderRains.forEach(rain => {\n            this.ctx.drawImage(rain.img, rain.x, rain.y, rain.width, rain.height)\n        })\n    }\n\n    removeRain (rain) {\n        const index = this.renderRains.indexOf(rain)\n        index > -1 && this.renderRains.splice(index, 1)\n    }\n\n    pause () {\n        this.isPlaying = false\n        this.offEvent()\n        this.stopRender()\n    }\n\n    // 动态添加\n    async add (rain) {\n        await this.loadImageItem(rain)\n        this.originRains.push(rain)\n    }\n\n    // 动态移除\n    remove (rain) {\n        const index = this.originRains.indexOf(rain)\n        index > -1 && this.originRains.splice(index, 1)\n    }\n\n    stop () {\n        this.isPlaying = false\n        this.renderRains = []\n        this.clearRect()\n        this.offEvent()\n        this.stopRender()\n    }\n}\n","<template>\n  <div id=\"app\">\n    <h3>积分：x{{ score }}</h3>\n    <canvas id=\"canvas\"></canvas>\n    <button @click=\"play\">开始</button>\n    <button @click=\"pause\">暂停</button>\n    <button @click=\"stop\">停止</button>\n    <button @click=\"add\">添加</button>\n    <button @click=\"remove\">移除</button>\n  </div>\n</template>\n\n<script>\nimport RainGame from '../../src'\n\nexport default {\n  data () {\n    return {\n      score: 0\n    }\n  },\n  mounted () {\n    this.rains = [\n      {\n        image: require('./img/normal.webp'),\n        width: 140,\n        height: 120,\n        ratio: 1,\n        score: 2,\n\n        clicked: {\n          image: require('./img/clicked.webp'),\n          width: 178,\n          height: 100,\n          translate: [-2, -2],\n        },\n      },\n    ]\n    \n    this.rainGame = new RainGame({\n      el: '#canvas',\n      preload: true,\n      interval: 500,\n      speed: 2,\n      horizontalMovement: true,\n      boundary: 4,\n      rains: this.rains,\n    })\n    this.rainGame.$on('strike', (rain) => {\n      this.score += rain.score\n      console.log(rain)\n    })\n  },\n  methods: {\n    play () {\n      this.score = 0\n      this.rainGame.play()\n    },\n    pause () {\n      this.rainGame.pause()\n    },\n    stop () {\n      this.score = 0\n      this.rainGame.stop()\n    },\n    add () {\n      this.rainGame.add({\n        id: 2,\n        image: require('./img/normal1.webp'),\n        width: 100,\n        height: 100,\n        ratio: 1,\n        score: 3,\n\n        clicked: {\n          image: require('./img/clicked1.webp'),\n          width: 100,\n          height: 100,\n          translate: [-2, -2],\n        },\n      })\n    },\n    remove () {\n      this.rainGame.remove(2)\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\nhtml, body {\n  height: 100%;\n}\n\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n\n  height: 100%;\n\n  canvas {\n    width: 100%;\n    height: 80%;\n  }\n\n  button {\n    margin-right: 8px;\n    border: 1px solid #ccc;\n  }\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=2f38f9cb&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&id=2f38f9cb&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport App from './App.vue'\nimport './css/reset.scss'\n\nVue.config.productionTip = false\n\nnew Vue({\n  render: h => h(App),\n}).$mount('#app')\n","module.exports = __webpack_public_path__ + \"img/normal.40becdab.webp\";","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&id=2f38f9cb&prod&lang=scss&\"","module.exports = __webpack_public_path__ + \"img/clicked1.8b4ed3f3.webp\";"],"sourceRoot":""}